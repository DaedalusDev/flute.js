"use strict";var O2={};Function.prototype.createClass=function(a){var b;return b=function(){"__construct"in this&&this.__construct.apply(this,arguments)},void 0===a?b:"object"==typeof a?b.extendPrototype(a):null},O2._superizeFunction=function(f,fParent){var fNew,s="fNew = function() {\nvar __inherited = (function() {\n\treturn fParent.apply(this, arguments);\n}).bind(this);\nvar __function = "+f.toString()+";\nreturn __function.apply(this, arguments);\n}\n";return eval(s)},Function.prototype.extendPrototype=function(a){var b,c,d="";a instanceof Function&&(a=a.prototype);for(d in a)if(b=a[d],d in this.prototype&&this.prototype[d]instanceof Function){if(c=this.prototype[d],!(b instanceof Function))throw new Error("o2: method "+d+" overridden by property.");this.prototype[d]=O2._superizeFunction(b,c)}else this.prototype[d]=a[d];return this},Function.prototype.extendClass=function(a,b){var c=this.createClass().extendPrototype(a).extendPrototype(b);return c},O2.createObject=function(a,b){for(var c,d=a.split("."),e=d.pop(),f=window;d.length;)c=d.shift(),c in f||(f[c]={}),f=f[c];if(e in f)for(var g in b)f[e][g]=b[g];else f[e]=b;return f},O2.loadObject=function(a,b){for(var c,d=a.split("."),e=b||window,f="";d.length>1;){if(c=d.shift(),!(c in e))throw new Error("could not find "+c+" in "+f.substr(1));e=e[c],f+="."+c}var g=d[0];if(g in e)return e[g];throw new Error("could not find "+g+" in "+f.substr(1))},O2._loadObject=function(a,b){return console.warn('O2._loadObject is deprecated. Use the brand new O2.loadObject, which do the same thing, but without this "_" in front of the name.'),console.trace(),O2.loadObject(a,b)},O2.createClass=function(a,b){return O2.createObject(a,Function.createClass(b))},O2.extendClass=function(a,b,c){return"string"==typeof b&&(b=O2.loadObject(b)),O2.createObject(a,Function.extendClass(b,c))},O2.mixin=function(a,b){var c;"string"==typeof a&&(a=O2.loadObject(a)),"function"==typeof b?(c=new b,c.mixin(a)):(c=b,a.extendPrototype(c))},O2.createClass("O876.Mixin.Events",{mixin:function(a){a.extendPrototype({_WeirdEventHandlers:null,on:function(a,b){null===this._WeirdEventHandlers&&(this._WeirdEventHandlers={});var c=this._WeirdEventHandlers;return a in c||(c[a]=[]),c[a].push(b),this},one:function(a,b){var c;return c=function(){b.apply(this,Array.prototype.slice.call(arguments,0)),this.off(a,c),c=null}.bind(this),this.on(a,c)},off:function(a,b){if(null===this._WeirdEventHandlers)throw new Error('no event "'+a+'" defined');if(void 0===a)this._WeirdEventHandlers={};else if(!(a in this._WeirdEventHandlers))throw new Error('no event "'+a+'" defined');var c,d,e=this._WeirdEventHandlers;if(void 0!==b){if(c=e[a],d=c.indexOf(b),d<0)throw new Error('this handler is not defined for event "'+a+'"');c.splice(d,1)}else e[a]=[];return this},trigger:function(a){if(null===this._WeirdEventHandlers)return this;var b=this._WeirdEventHandlers;if(!(a in b))return this;var c=Array.prototype.slice.call(arguments,1);return b[a].forEach(function(a){a.apply(this,c)},this),this}})}});